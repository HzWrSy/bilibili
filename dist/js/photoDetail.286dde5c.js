(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["photoDetail"],{"20d1":function(t,e,s){t.exports=s.p+"img/kong.7043a091.png"},"4c4f":function(t,e,s){"use strict";var a=s("a784"),n=s.n(a);n.a},a784:function(t,e,s){},aa77:function(t,e,s){var a=s("5ca1"),n=s("be13"),i=s("79e5"),r=s("fdef"),o="["+r+"]",u="​",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t,e,s){var n={},o=i(function(){return!!r[t]()||u[t]()!=u}),c=n[t]=o?e(m):r[t];s&&(n[s]=c),a(a.P+a.F*o,"String",n)},m=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},c3ec:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"photoDetail"},[a("HeaderNav"),a("div",{staticStyle:{margin:"50px auto",width:"80%"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.albumLength,expression:"albumLength == 1"}],staticClass:"photo"},[a("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"10px"}},[a("p",{staticStyle:{float:"right"}},[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link",staticStyle:{"font-size":"12px",color:"#ccc"}},[t._v("\n\t\t\t\t\t\t\t编辑"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("router-link",{attrs:{to:{name:"insertAlbum",query:{albumId:t.albumId}}}},[t._v("编辑相簿")])],1),a("el-dropdown-item",[a("span",{on:{click:t.deleteAlbum}},[t._v("删除")])])],1)],1)],1),a("br")]),a("div",{staticClass:"p-title"},[a("div",[a("span",[t._v(t._s(t.userAlbum[0].xyalbum.albumname))]),a("span",[t._v(t._s(t.userAlbum[0].time))])]),t._m(0)]),a("div",{staticClass:"p-content"},[a("div",{staticClass:"p-text"},[t._v(t._s(t.albumName))]),t._l(t.userAlbum,function(t,e){return a("div",{key:e,staticClass:"p-img"},[a("img",{attrs:{src:t.url}})])})],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.albumLength,expression:"albumLength == 0"}],staticClass:"photo"},[a("div",{staticStyle:{"text-align":"center",height:"500px",padding:"100px","box-sizing":"border-box"}},[a("img",{attrs:{src:s("20d1"),alt:""}}),a("p",{staticStyle:{color:"#ccc","padding-bottom":"20px"}},[t._v("当前相簿还没有相片……")]),a("router-link",{attrs:{to:{name:"insertAlbum",query:{albumId:t.albumId,albumName:t.albumName}}}},[t._v("点此去添加相片")])],1)]),a("photoComment",{attrs:{user:t.user,albumId:t.albumId}}),1==t.albumLength?a("div",{staticClass:"u-fix"},[a("div",{staticClass:"u-info"},[a("router-link",{attrs:{to:{name:"homepage",query:{userid:t.userAlbum[0].xyuser.userid}}}},[a("img",{attrs:{src:t.userAlbum[0].xyuserinfo.userphoto}})]),a("div",{staticStyle:{width:"120px",margin:"0 auto","text-align":"center","padding-bottom":"20px"}},[a("p",{staticClass:"p-text"},[t._v(t._s(t.userAlbum[0].xyuser.username))]),a("router-link",{attrs:{to:{name:"contribute",query:{userid:t.userAlbum[0].xyuser.userid}}}},[a("span",[t._v("视频")])]),t._v("|\n\t\t\t\t\t"),a("router-link",{attrs:{to:{name:"channel",query:{userid:t.userAlbum[0].xyuser.userid}}}},[a("span",[t._v("相簿")])])],1),a("div",{staticStyle:{width:"180px",margin:"0 auto","text-align":"center"}},[a("span",{staticClass:"atten",on:{click:t.guanzhu}},[t._v("关注")]),a("span",{staticClass:"send"},[t._v("发消息")])])],1),a("div",{staticClass:"u-like"},[a("div",[a("div",{staticClass:"qzc",on:{click:t.like}}),a("span",[t._v("求支持(/▽\\)")])]),a("div",[a("div",{staticClass:"coll",on:{click:t.collect}}),a("a",{staticStyle:{display:"block","text-align":"center"}},[t._v("收藏")])])])]):t._e()],1),a("Footer")],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{float:"right"}},[s("span",[t._v("浏览：16 ")]),s("span",[t._v("收藏：0")])])}],i=s("75fc"),r=(s("cadf"),s("551c"),s("f751"),s("097d"),s("387d")),o=s("9fe9"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"photoComment"},[s("div",{staticClass:"commentAll",staticStyle:{"margin-top":"20px"}},[s("p",{staticStyle:{color:"rgb(0,131,231)","border-bottom":"1px solid #ccc",padding:"5px 10px","font-weight":"800"}},[t._v("全部评论")]),s("div",{staticClass:"comment-list"},[t.user.userid?s("div",{staticClass:"comment"},[s("div",{staticClass:"c-left"},[s("img",{attrs:{src:t.user.xyuserinfo.userphoto}})]),s("div",{staticClass:"c-right"},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),s("el-button",{staticStyle:{"line-height":"20px"},attrs:{type:"primary"},on:{click:t.addComment}},[t._v("发表"),s("br"),t._v("评论")])],1)]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.userid,expression:"!user.userid"}],staticClass:"comment"},[t._m(0),s("div",{staticClass:"c-right"},[s("p",{staticClass:"p-text"},[t._v("请先\n\t\t\t\t\t\t"),s("router-link",{attrs:{to:{name:"login"}}},[t._v("登录")]),t._v("\n\t\t\t\t\t再评论")],1),s("el-input",{attrs:{type:"textarea",disabled:"",autosize:{minRows:3,maxRows:3},placeholder:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),s("el-button",{staticStyle:{"line-height":"20px"},attrs:{type:"primary",disabled:""}},[t._v("发表"),s("br"),t._v("评论")])],1)]),t._l(t.pComment.xyuser,function(e,a){return s("div",{key:a,staticClass:"comment"},[s("div",{staticClass:"c-left"},[s("img",{attrs:{src:e.xyuserinfo.userphoto}})]),s("div",{staticClass:"c-right"},[s("p",[t._v(t._s(e.xyuser.username))]),s("p",{staticClass:"p-text"},[t._v(t._s(e.content))]),s("div",[s("span",[t._v(t._s(e.time))])]),e.xyuser.username==t.user.username?s("span",{staticStyle:{float:"right"},on:{click:function(s){return t.deleteComment(e.commentid)}}},[t._v("删除")]):t._e()])])}),s("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pComment.count,expression:"pComment.count"}],staticStyle:{"text-align":"center",display:"block","padding-top":"30px"},attrs:{background:"",layout:"prev, pager, next","page-size":5,total:t.pComment.count},on:{"current-change":t.handleCurrentChange}})],2)])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-left"},[s("img",{attrs:{src:"http://cdn.hwzhj.top/img/default.gif"}})])}],l=(s("c5f6"),{data:function(){return{textarea:"",pComment:{xyuser:{},xyuserinfo:{}}}},props:{user:Object,albumId:Number},computed:{ValbumId:function(){return this.albumId}},watch:{ValbumId:function(t,e){this.handleCurrentChange(1)}},mounted:function(){this.handleCurrentChange(1)},methods:{addComment:function(){var t=this;this.axios.post("xypgotocomment/insetByUserIdAndPhotoId.do",{photoid:this.ValbumId,content:this.textarea}).then(function(e){e.data.xyuser&&(t.textarea="",t.handleCurrentChange(1))})},handleCurrentChange:function(t){var e=this;this.axios.get("xypgotocomment/findPageByPhotoId.do",{params:{photoid:this.ValbumId,page:t}}).then(function(t){e.pComment=t.data})},deleteComment:function(t){var e=this;this.$confirm("此操作将永久删除该评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.get("xypgotocomment/deleteByCommentId.do",{params:{commentid:t}}).then(function(t){1==t.data.xyuser?(e.$message({type:"success",message:"删除成功!"}),e.handleCurrentChange(1)):e.$message({type:"error",message:"删除失败!请重试"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}}),d=l,m=(s("4c4f"),s("2877")),p=Object(m["a"])(d,u,c,!1,null,"4308503b",null),h=p.exports,f=s("c0d6"),g={store:f["a"],data:function(){return{albumName:"",albumId:0,albumLength:1,userAlbum:[{time:"",xyalbum:{},xyuser:{},xyuserinfo:{userphoto:""}}],user:{xyuserinfo:{}}}},components:{HeaderNav:r["a"],Footer:o["a"],photoComment:h},mounted:function(){this.user=f["a"].state.user,this.getPhoto1()},methods:{getPhoto1:function(){var t=this;this.albumId=1*this.$route.query.albumId,this.axios.get("xyphoto/findByAlbumIdPass.do",{params:{albumid:this.albumId}}).then(function(e){e.data.xyuser.length?(t.userAlbum=Object(i["a"])(e.data.xyuser),t.axios.get("xyfriend/findByFriend.do",{params:{userfriend:t.userAlbum[0].xyuser.userid}}).then(function(t){1==t.data.xyuser&&($(".atten").attr("class","att"),$(".att").html("已关注"))})):t.albumLength=e.data.xyuser.length}),this.user.userid&&(this.axios.get("xyalnumclick/findCouByUseridAndVideoId.do",{params:{albumid:this.albumId}}).then(function(t){1==t.data.xyuser&&$(".qzc").attr("class","yzc")}),this.axios.get("xyalbumcollection/findCouByUseridAndVideoId.do",{params:{albumid:this.albumId}}).then(function(t){1==t.data.xyuser&&$(".coll").attr("class","ycoll")}))},deleteAlbum:function(){var t=this;this.$confirm("此操作将永久删除该相簿, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.get("xyalbum/deleteByAlbumid.do",{params:{albumid:t.albumId}}).then(function(e){1==e.data.xyuser?(t.$message({type:"success",message:"删除成功!",duration:1e3}),t.$router.push({name:"channel"})):t.$message({type:"error",message:"删除失败!请重试",duration:1e3})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},like:function(){var t=this;this.user.userid?this.axios.get("xyalnumclick/updateAddUpById.do",{params:{albumid:this.albumId}}).then(function(e){0==e.data.xyuser?($(".qzc").attr("class","yzc"),t.$message({type:"success",message:"蟹蟹(*^▽^*)!",duration:1e3})):($(".yzc").attr("class","qzc"),t.$message({type:"success",message:"已取消点赞o(╥﹏╥)o!",duration:1e3}))}):this.$message({type:"success",message:"请先登录！",duration:1e3})},collect:function(){var t=this;this.user.userid?this.axios.get("xyalbumcollection/updateAddUpById.do",{params:{albumid:this.albumId}}).then(function(e){0==e.data.xyuser?($(".coll").attr("class","ycoll"),t.$message({type:"success",message:"蟹蟹(*^▽^*)!",duration:1e3})):($(".ycoll").attr("class","coll"),t.$message({type:"success",message:"已取消收藏o(╥﹏╥)o!",duration:1e3}))}):this.$message({type:"success",message:"请先登录！",duration:1e3})},guanzhu:function(){this.user.userid?this.user.userid==this.userAlbum[0].xyuser.userid?this.$message({type:"success",message:"不能关注自己o(╥﹏╥)o!",duration:1e3}):this.axios.get("xyfriend/updateAddUpById.do",{params:{userfriend:this.userAlbum[0].xyuser.userid}}).then(function(t){0==t.data.xyuser?($(".atten").attr("class","att"),$(".att").html("已关注")):($(".att").attr("class","atten"),$(".atten").html("关注"))}):this.$message({type:"success",message:"请先登录!",duration:1e3})}},beforeRouteEnter:function(t,e,s){t.query.albumId||s({name:"indexBody"}),s()}},x=g,y=(s("dec0"),Object(m["a"])(x,a,n,!1,null,"80b60cb2",null));e["default"]=y.exports},c5f6:function(t,e,s){"use strict";var a=s("7726"),n=s("69a8"),i=s("2d95"),r=s("5dbc"),o=s("6a99"),u=s("79e5"),c=s("9093").f,l=s("11e9").f,d=s("86cc").f,m=s("aa77").trim,p="Number",h=a[p],f=h,g=h.prototype,x=i(s("2aeb")(g))==p,y="trim"in String.prototype,b=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():m(e,3);var s,a,n,i=e.charCodeAt(0);if(43===i||45===i){if(s=e.charCodeAt(2),88===s||120===s)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+e}for(var r,u=e.slice(2),c=0,l=u.length;c<l;c++)if(r=u.charCodeAt(c),r<48||r>n)return NaN;return parseInt(u,a)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof h&&(x?u(function(){g.valueOf.call(s)}):i(s)!=p)?r(new f(b(e)),s,h):b(e)};for(var v,C=s("9e1e")?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;C.length>_;_++)n(f,v=C[_])&&!n(h,v)&&d(h,v,l(f,v));h.prototype=g,g.constructor=h,s("2aba")(a,p,h)}},dec0:function(t,e,s){"use strict";var a=s("decb"),n=s.n(a);n.a},decb:function(t,e,s){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=photoDetail.286dde5c.js.map